package me.primooctopus33.octohack.client.modules.exploit;

import java.util.Objects;
import me.primooctopus33.octohack.client.modules.Module;
import me.primooctopus33.octohack.client.setting.Setting;
import net.minecraft.network.play.client.CPacketPlayer;

public class AutoRubberband
extends Module {
    private static Setting<RubberMode> mode;
    private static Setting<Integer> yMotion;

    public AutoRubberband() {
        super("AutoRubberband", "Attempts to rubberband you", Module.Category.EXPLOIT, true, false, false);
        mode = this.register(new Setting<RubberMode>("Mode", RubberMode.Motion));
        yMotion = this.register(new Setting<Object>("Y Motion", Integer.valueOf(1), Integer.valueOf(-15), Integer.valueOf(15), v -> mode.getValue() == RubberMode.Motion));
    }

    @Override
    public void onEnable() {
    }

    @Override
    public void onUpdate() {
        switch (mode.getValue()) {
            case Motion: {
                AutoRubberband.mc.player.motionY = yMotion.getValue().intValue();
                break;
            }
            case Packet: {
                Objects.requireNonNull(mc.getConnection()).sendPacket(new CPacketPlayer.Position(AutoRubberband.mc.player.posX, AutoRubberband.mc.player.posY + (double)yMotion.getValue().intValue(), AutoRubberband.mc.player.posZ, true));
                break;
            }
            case Teleport: {
                AutoRubberband.mc.player.setPositionAndUpdate(AutoRubberband.mc.player.posX, AutoRubberband.mc.player.posY + (double)yMotion.getValue().intValue(), AutoRubberband.mc.player.posZ);
            }
        }
        this.toggle();
    }

    public static enum RubberMode {
        Motion,
        Teleport,
        Packet;

    }
}
